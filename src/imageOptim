#!/bin/bash

CLI_PATH="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
source "${CLI_PATH}/imageOptimBashLib"

# ------------------------------------
# POPULATE VARIABLES
# ------------------------------------

# Determine which Applications are installed.
HAS_IMAGE_ALPHA=$(has_app $APP_FILENAME_IMAGE_ALPHA $APP_BUNDLE_ID_IMAGE_ALPHA)
HAS_IMAGE_OPTIM=$(has_app $APP_FILENAME_IMAGE_ALPHA $APP_BUNDLE_ID_IMAGE_ALPHA)
HAS_JPEGMINI=$(has_app $APP_FILENAME_JPEGMINI $APP_BUNDLE_ID_JPEGMINI)
HAS_JPEGMINI_LITE=$(has_app $APP_FILENAME_JPEGMINI $APP_BUNDLE_ID_JPEGMINI_LITE)
HAS_JPEGMINI_RETAIL=$(has_app $APP_FILENAME_JPEGMINI $APP_BUNDLE_ID_JPEGMINI_RETAIL)
HAS_GUI_SCRIPT=$(has_gui_script)

# ------------------------------------
# BEGIN PROCESSING
# ------------------------------------

init_temp_directory
prepare_images
run_image_alpha
run_jpegmini
run_image_optim
